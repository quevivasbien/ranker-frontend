import{u as O,a as B}from"../chunks/stores.067376b0.js";import{f as j,s as H,n as d,r as J}from"../chunks/scheduler.0d71c3e3.js";import{S as R,i as W,g as b,s as S,e as D,h as k,A as N,c as P,k as m,a as C,d as g,t as w,f as p,m as G,j as I,n as K,y,z as T,B as Q,p as z,b as A,C as X,D as Y,E as F,r as Z,u as ee,v as te,w as ne}from"../chunks/index.f7859a9c.js";import{h as $,u as x,I as le}from"../chunks/ItemInfo.2ff7902c.js";import{e as q}from"../chunks/each.e59479a4.js";function oe(s){return{getItemsForComparison:async()=>{const n=j(O);if(!n)return console.log("No user info when fetching items for comparison"),null;const f=await s.fetch("https://ranker-backend.fly.dev/compare",{headers:{Authorization:n.token}});return f.ok?await f.json():(console.log("Error fetching items for comparison, received response",f),null)},getItem:async n=>{const f=j(B);let a=f.find(i=>i.name===n);if(a)return a;const r=j(O);if(r==null)return console.log("No user info when fetching item info for comparison"),null;const o=await s.fetch(`https://ranker-backend.fly.dev/items/${n}`,{headers:{Authorization:r.token}});return o.ok?(a=await o.json(),f.push(a),B.set(f),a):(console.log("Error fetching item, received response",o),null)},sendUserChoice:async(n,f,a)=>{const r=j(O);return r?(await s.fetch("https://ranker-backend.fly.dev/compare",{method:"POST",headers:{"Content-Type":"application/json",Authorization:r.token},body:JSON.stringify({item1:n,item2:f,winner:a})})).status:(console.log("No user info when sending user choice"),500)}}}const ve=Object.freeze(Object.defineProperty({__proto__:null,load:oe},Symbol.toStringTag,{value:"Module"}));function V(s,e,l){const t=s.slice();return t[12]=e[l],t}function re(s){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function se(s){let e,l,t,n,f,a,r,o,i,c=s[11]&&L(s);function v(){return s[7](s[11])}function _(){return s[8](s[11])}return{c(){e=b("form"),c&&c.c(),l=S(),t=b("div"),n=b("button"),f=G("Submit"),this.h()},l(h){e=k(h,"FORM",{class:!0});var u=I(e);c&&c.l(u),l=P(u),t=k(u,"DIV",{class:!0});var E=I(t);n=k(E,"BUTTON",{type:!0,class:!0});var U=I(n);f=K(U,"Submit"),U.forEach(p),E.forEach(p),u.forEach(p),this.h()},h(){m(n,"type","button"),m(n,"class","drop-shadow rounded bg-blue-200 disabled:bg-gray-300 p-2"),n.disabled=a=s[1]===void 0,m(t,"class","flex flex-row justify-end"),m(e,"class","flex flex-col space-y-2")},m(h,u){C(h,e,u),c&&c.m(e,null),y(e,l),y(e,t),y(t,n),y(n,f),r=!0,o||(i=[T(n,"click",v),T(e,"submit",Q(_))],o=!0)},p(h,u){s=h,s[11]?c?(c.p(s,u),u&1&&g(c,1)):(c=L(s),c.c(),g(c,1),c.m(e,l)):c&&(z(),w(c,1,1,()=>{c=null}),A()),(!r||u&2&&a!==(a=s[1]===void 0))&&(n.disabled=a)},i(h){r||(g(c),r=!0)},o(h){w(c),r=!1},d(h){h&&p(e),c&&c.d(),o=!1,J(i)}}}function L(s){let e,l,t=q(s[11]),n=[];for(let a=0;a<t.length;a+=1)n[a]=M(V(s,t,a));const f=a=>w(n[a],1,1,()=>{n[a]=null});return{c(){e=b("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var r=I(e);for(let o=0;o<n.length;o+=1)n[o].l(r);r.forEach(p),this.h()},h(){m(e,"class","flex flex-row space-x-4")},m(a,r){C(a,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);l=!0},p(a,r){if(r&7){t=q(a[11]);let o;for(o=0;o<t.length;o+=1){const i=V(a,t,o);n[o]?(n[o].p(i,r),g(n[o],1)):(n[o]=M(i),n[o].c(),g(n[o],1),n[o].m(e,null))}for(z(),o=t.length;o<n.length;o+=1)f(o);A()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)g(n[r]);l=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)w(n[r]);l=!1},d(a){a&&p(e),X(n,a)}}}function ae(s){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function ie(s){let e,l,t,n,f;const a=[ue,ce],r=[];function o(i,c){return i[15]!==null?0:1}return l=o(s),t=r[l]=a[l](s),{c(){e=b("div"),t.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var c=I(e);t.l(c),c.forEach(p),this.h()},h(){m(e,"class",n=`border rounded-md m-1 p-4 w-full ${s[1]===s[12]?"bg-white drop-shadow-md border-2":"bg-inherit"}`)},m(i,c){C(i,e,c),r[l].m(e,null),f=!0},p(i,c){let v=l;l=o(i),l===v?r[l].p(i,c):(z(),w(r[v],1,1,()=>{r[v]=null}),A(),t=r[l],t?t.p(i,c):(t=r[l]=a[l](i),t.c()),g(t,1),t.m(e,null)),(!f||c&3&&n!==(n=`border rounded-md m-1 p-4 w-full ${i[1]===i[12]?"bg-white drop-shadow-md border-2":"bg-inherit"}`))&&m(e,"class",n)},i(i){f||(g(t),f=!0)},o(i){w(t),f=!1},d(i){i&&p(e),r[l].d()}}}function ce(s){let e,l="Item not found";return{c(){e=b("p"),e.textContent=l},l(t){e=k(t,"P",{["data-svelte-h"]:!0}),N(e)!=="svelte-9i07uy"&&(e.textContent=l)},m(t,n){C(t,e,n)},p:d,i:d,o:d,d(t){t&&p(e)}}}function ue(s){let e,l;return e=new le({props:{item:s[15]}}),{c(){Z(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,n){te(e,t,n),l=!0},p(t,n){const f={};n&1&&(f.item=t[15]),e.$set(f)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){ne(e,t)}}}function fe(s){let e,l="loading...";return{c(){e=b("p"),e.textContent=l},l(t){e=k(t,"P",{["data-svelte-h"]:!0}),N(e)!=="svelte-qeejp2"&&(e.textContent=l)},m(t,n){C(t,e,n)},p:d,i:d,o:d,d(t){t&&p(e)}}}function M(s){let e,l,t,n=!1,f,a,r,o,i,c,v,_={ctx:s,current:null,token:null,hasCatch:!1,pending:fe,then:ie,catch:ae,value:15,blocks:[,,,]};return $(a=s[2](s[12]),_),i=Y(s[6][0]),{c(){e=b("label"),l=b("input"),f=S(),_.block.c(),r=S(),this.h()},l(h){e=k(h,"LABEL",{class:!0});var u=I(e);l=k(u,"INPUT",{type:!0,class:!0}),f=P(u),_.block.l(u),r=P(u),u.forEach(p),this.h()},h(){m(l,"type","radio"),l.__value=t=s[12],F(l,l.__value),m(l,"class","appearance-none"),m(e,"class","flex flex-row cursor-pointer min-w-[25%]"),i.p(l)},m(h,u){C(h,e,u),y(e,l),l.checked=l.__value===s[1],y(e,f),_.block.m(e,_.anchor=null),_.mount=()=>e,_.anchor=r,y(e,r),o=!0,c||(v=T(l,"change",s[5]),c=!0)},p(h,u){s=h,(!o||u&1&&t!==(t=s[12]))&&(l.__value=t,F(l,l.__value),n=!0),(n||u&3)&&(l.checked=l.__value===s[1]),_.ctx=s,u&1&&a!==(a=s[2](s[12]))&&$(a,_)||x(_,s,u)},i(h){o||(g(_.block),o=!0)},o(h){for(let u=0;u<3;u+=1){const E=_.blocks[u];w(E)}o=!1},d(h){h&&p(e),_.block.d(),_.token=null,_=null,i.r(),c=!1,v()}}}function de(s){let e,l="loading...";return{c(){e=b("p"),e.textContent=l},l(t){e=k(t,"P",{["data-svelte-h"]:!0}),N(e)!=="svelte-qeejp2"&&(e.textContent=l)},m(t,n){C(t,e,n)},p:d,i:d,o:d,d(t){t&&p(e)}}}function he(s){let e,l="Which do you prefer?",t,n,f,a,r={ctx:s,current:null,token:null,hasCatch:!1,pending:de,then:se,catch:re,value:11,blocks:[,,,]};return $(f=s[0],r),{c(){e=b("h1"),e.textContent=l,t=S(),n=D(),r.block.c(),this.h()},l(o){e=k(o,"H1",{class:!0,["data-svelte-h"]:!0}),N(e)!=="svelte-vxr97"&&(e.textContent=l),t=P(o),n=D(),r.block.l(o),this.h()},h(){m(e,"class","text-2xl mb-8")},m(o,i){C(o,e,i),C(o,t,i),C(o,n,i),r.block.m(o,r.anchor=i),r.mount=()=>n.parentNode,r.anchor=n,a=!0},p(o,[i]){s=o,r.ctx=s,i&1&&f!==(f=s[0])&&$(f,r)||x(r,s,i)},i(o){a||(g(r.block),a=!0)},o(o){for(let i=0;i<3;i+=1){const c=r.blocks[i];w(c)}a=!1},d(o){o&&(p(e),p(t),p(n)),r.block.d(o),r.token=null,r=null}}}function _e(s,e,l){let{data:t}=e;const{getItemsForComparison:n,getItem:f,sendUserChoice:a}=t;let r=n(),o;function i(u){o===void 0||u===null||(a(u[0],u[1],o).then(()=>{l(0,r=n())}),l(1,o=void 0))}const c=[[]];function v(){o=this.__value,l(1,o)}const _=u=>i(u),h=u=>i(u);return s.$$set=u=>{"data"in u&&l(4,t=u.data)},[r,o,f,i,t,v,c,_,h]}class Ce extends R{constructor(e){super(),W(this,e,_e,he,H,{data:4})}}export{Ce as component,ve as universal};

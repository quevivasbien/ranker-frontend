import{a as T,u as V}from"../chunks/stores.067376b0.js";import{f as G,s as O,e as I,n as m}from"../chunks/scheduler.0d71c3e3.js";import{S as U,i as B,g as b,m as j,s as q,h as k,j as w,n as C,f as _,c as z,k as A,a as g,y,o as M,d,b as N,t as v,C as x,p as F,r as H,u as J,v as K,w as L,A as Q}from"../chunks/index.f7859a9c.js";import{h as $,u as R,I as W}from"../chunks/ItemInfo.2ff7902c.js";import{e as E}from"../chunks/each.e59479a4.js";async function X(l){const e=async n=>{const a=await l.fetch(`https://ranker-backend.fly.dev/scores/${n}`);return a.ok?await a.json():(console.log("Error fetching global score",a),null)},c=async n=>{const a=G(V);if(!a)return console.log("No user info when fetching user score"),null;const s=await l.fetch(`https://ranker-backend.fly.dev/scores/${n}/${a.username}`,{headers:{Authorization:a.token}});return s.ok?await s.json():(console.log("Error fetching user score",s),null)},u=await(await l.fetch("https://ranker-backend.fly.dev/items")).json();return T.set(u),{getGlobalScore:e,getUserScore:c}}const ce=Object.freeze(Object.defineProperty({__proto__:null,load:X},Symbol.toStringTag,{value:"Module"}));function D(l,e,c){const t=l.slice();return t[6]=e[c],t}function Y(l){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Z(l){let e,c;return e=new W({props:{item:l[6],globalScore:l[9].globalScore,userScore:l[9].userScore}}),{c(){H(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,u){K(e,t,u),c=!0},p(t,u){const n={};u&1&&(n.item=t[6]),u&1&&(n.globalScore=t[9].globalScore),u&1&&(n.userScore=t[9].userScore),e.$set(n)},i(t){c||(d(e.$$.fragment,t),c=!0)},o(t){v(e.$$.fragment,t),c=!1},d(t){L(e,t)}}}function ee(l){let e,c="loading...";return{c(){e=b("p"),e.textContent=c},l(t){e=k(t,"P",{["data-svelte-h"]:!0}),Q(e)!=="svelte-qeejp2"&&(e.textContent=c)},m(t,u){g(t,e,u)},p:m,i:m,o:m,d(t){t&&_(e)}}}function P(l){let e,c,t,u,n={ctx:l,current:null,token:null,hasCatch:!1,pending:ee,then:Z,catch:Y,value:9,blocks:[,,,]};return $(c=l[1](l[6].name),n),{c(){e=b("div"),n.block.c(),t=q(),this.h()},l(a){e=k(a,"DIV",{class:!0});var s=w(e);n.block.l(s),t=z(s),s.forEach(_),this.h()},h(){A(e,"class","m-8")},m(a,s){g(a,e,s),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=t,y(e,t),u=!0},p(a,s){l=a,n.ctx=l,s&1&&c!==(c=l[1](l[6].name))&&$(c,n)||R(n,l,s)},i(a){u||(d(n.block),u=!0)},o(a){for(let s=0;s<3;s+=1){const h=n.blocks[s];v(h)}u=!1},d(a){a&&_(e),n.block.d(),n.token=null,n=null}}}function te(l){let e,c,t=l[0].length+"",u,n,a,s,h=E(l[0]),o=[];for(let r=0;r<h.length;r+=1)o[r]=P(D(l,h,r));const S=r=>v(o[r],1,1,()=>{o[r]=null});return{c(){e=b("div"),c=j("Total items: "),u=j(t),n=q(),a=b("div");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=k(r,"DIV",{});var f=w(e);c=C(f,"Total items: "),u=C(f,t),f.forEach(_),n=z(r),a=k(r,"DIV",{class:!0});var i=w(a);for(let p=0;p<o.length;p+=1)o[p].l(i);i.forEach(_),this.h()},h(){A(a,"class","flex flex-wrap my-2")},m(r,f){g(r,e,f),y(e,c),y(e,u),g(r,n,f),g(r,a,f);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(a,null);s=!0},p(r,[f]){if((!s||f&1)&&t!==(t=r[0].length+"")&&M(u,t),f&3){h=E(r[0]);let i;for(i=0;i<h.length;i+=1){const p=D(r,h,i);o[i]?(o[i].p(p,f),d(o[i],1)):(o[i]=P(p),o[i].c(),d(o[i],1),o[i].m(a,null))}for(F(),i=h.length;i<o.length;i+=1)S(i);N()}},i(r){if(!s){for(let f=0;f<h.length;f+=1)d(o[f]);s=!0}},o(r){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)v(o[f]);s=!1},d(r){r&&(_(e),_(n),_(a)),x(o,r)}}}function oe(l,e,c){let t,u;I(l,V,o=>c(3,t=o)),I(l,T,o=>c(0,u=o));let{data:n}=e;const{getGlobalScore:a,getUserScore:s}=n;async function h(o){const S=await a(o);let r;return t!==null&&(r=await s(o)),{globalScore:S,userScore:r}}return l.$$set=o=>{"data"in o&&c(2,n=o.data)},[u,h,n]}class ie extends U{constructor(e){super(),B(this,e,oe,te,O,{data:2})}}export{ie as component,ce as universal};
